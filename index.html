<!DOCTYPE html>
<html>

<head>
  <title>Applications with PHP and MySQL on AWS</title>
  <meta charset="UTF-8">
  <meta name="description"
        content="Applications with PHP and MySQL on Amazon Web Services">
  <script src="./javascript/dropdown.js"
          async></script>
  <link href="./css/styles.css"
        rel="stylesheet">
  <link href="./css/navbarStyles.css"
        rel="stylesheet">
</head>

<body>
  <header>
    <div id="title-position">
      <img id="php-and-mysql-pic"
           src="./img/PHPandMySQL-transparent.png"
           width="10%">
      <h2>Приложения с PHP и MySQL на AWS</h2>
      <img id="aws-transparent"
           src="./img/aws-transparent.png"
           width="15%">
    </div>
  </header>
  <nav>
    <ul id="navigation-list">
      <li><a href="#what-is-AWS">Какво са Амазон Уеб Услуги (AWS) и какво са облачни услуги?</a></li>
      <li><a href="#cloud-hosting">Предимства на облачният хостинг и ролята на AWS</a></li>
      <li><a href="#hosting-on-AWS-EC2">Защо да хоствате уеб сайта си на AWS и какво е EC2?</a></li>
      <a class="collapsible"
         href="#steps-to-host-PHP-app">Подробни стъпки за хостване на PHP приложение на AWS EC2 инстанция:</a>
      <section id="steps-for-setup">
        <li><a href="#login-AWS">1. Логин в AWS потребителски акаунт</a></li>
        <li><a href="#finding-EC2">2. Намиране на EC2 услугата</a></li>
        <li><a href="#choosing-OS">3. Избиране на предпочитана ОС</a></li>
        <li><a href="#configuring-EC2">4. Конфигуриране на EC2</a></li>
        <li><a href="#network-config">5. Задаване на мрежови настройки</a></li>
        <li><a href="#adding-storage">6. Конфигуриране на хранилище</a></li>
        <li><a href="#additional-settings">7. Допълнителни настройки</a></li>
        <li><a href="#start-EC2">8. Стартиране на EC2</a></li>
        <li><a href="#connect-to-EC2">9. Свързване към EC2</a></li>
        <li><a href="#instal-Apache-and-PHP">10. Инсталиране на Apache сървър и PHP</a></li>
        <li><a href="#creating-simple-PHP-app">11. Създаване на просто PHP приложение</a></li>
        <li><a href="#instal-MySQL-over-Apache">12. Инсталиране на MySQL върху Apache сървър</a></li>
      </section>
      <li><a href="#resources">Източници</a></li>
    </ul>
  </nav>
  <section>
    <article>
      <h3 class="offset"
          id="what-is-AWS">Какво са Амазон Уеб Услуги (AWS) и какво са облачни услуги?</h3>
      <p>Облачните изчисления са компютърни услуги, предоставяни на потребителите чрез отдалечен компютър, към който
        потребителят
        се свързва чрез интернет или чрез специална комуникационна линия. Облачните услуги се делят на следните четири
        типа:
        Софтуер като услуга (SaaS), Платформа като услуга (PaaS), Инфраструктура като услуга (IaaS), Десктоп като услуга
        (DaaS).
        Амазон Уеб Услугите представляват облачни услуги, от които всеки може да се възползва. Компанията е водеща сред
        платформите за облачни изчисления. Амазон предлага облак за най-различни уеб услуги като: сървъри за хостинг на
        уеб
        страници, хранилища, изчислителна мощ, мрежи, защита на приложения и бази данни и други.</p>
    </article>
    <article>
      <h3 class="offset"
          id="cloud-hosting">Предимства на облачният хостинг и ролята на AWS</h3>
      <p>Облачният хостинг е изключително достъпен и предлага безпрецедентно ниво на мащабируемост отвъд възможностите
        на
        традиционния хостинг. Предимствата са, че облакът се грижи за цялата инфраструктура, нейното помещаване,
        връзката с
        интернет мрежата, поддръжката на целият хардуер. Същевременно потребителят, ползващ облачните услуги (и по-точно
        облачният хостинг), заплаща периодична такса, пропорционална на ползваната услуга, като получава наготово всички
        ресурси, нужни за работата на обслужваното приложение. Що се отнася до сигурността на уеб приложенията, AWS
        хостингът на
        PHP приложения е далеч, по-ефикасен от традиционните уеб сървъри с PHP и MySQL (напр. XAMPP), тъй като предлага
        по-добра
        организация на защитните слоеве. Това се случва посредством управление на самоличността, сегрегация на
        хранилището,
        изолиране на данни, защитни стени, възстановяване чрез бекъп архиви и криптиране.</p>
    </article>
    <article>
      <h3 class="offset"
          id="hosting-on-AWS-EC2">Защо да хоствате уеб сайта си на AWS и какво е EC2?</h3>
      <p>Amazon Elastic Compute Cloud (Amazon EC2) е основният компонент на Amazon Web Services. Той позволява на
        потребителите
        да наемат виртуални компютри, на които да изпълняват уеб приложения, като виртуален частен сървър. Тези
        виртуални частни
        сървъри приличат почти изцяло по функционалност на обикновените физически сървъри.

        Ето трите основни предимства от разполагането на PHP приложение върху Amazon EC2, подчертавайки факта, че
        бизнесите
        бързо се движат към платформата за хостинг на виртуални сървъри на Амазон:</p>

      <ul>
        <li>
          <h4>Пълен контрол с Ease of Access</h4>
          <ul id="sublist">
            <li>Потребителите имат пълен административен контрол върху своите виртуални сървъри
              хоствайки уеб сайт върху AWS EC2. Често EC2 - виртуалните машини на AWS - биват разглеждани и като
              изчислителни инстанции. По същество PHP MySQL AWS хостингът осигурява същото ниво на
              достъп и контрол като физически сървър, управляван локално в офиса. <a class="resource-link"
                 href="#resourse-1">[1]</a></li>
            <li>
              Потребителите могат ефективно да управляват много уеб функции чрез уеб интерфейса на Amazon EC2, който
              позволява на
              потребителите да увеличават или намаляват, зареждат и конфигурират процесорни настройки само с няколко
              щраквания. <a class="resource-link"
                 href="#resourse-1">[1]</a></li>
          </ul>
        </li>
        <li>
          <h4>Свобода да изберете платформа по ваш избор</h4>
          <ul id="sublist">
            <li>Когато стартирате приложение на EC2 инстанция, вие получавате правомощия да стартирате операционна
              система по ваш избор.
              Потребителите могат да избират от множество дистрибуции на Linux или да стартират сървъра на Microsoft
              Windows. Това е важна функция за повечето фирми, особено за тези, обмислящи миграция към облачни услуги.
              Ако една компания е използвала Windows Server от години и е разработила приложения и бази данни в рамките
              на Windows Server,
              не трябва да се налага да препрограмират своята IT инфраструктура в облака, за да работи на различна
              платформа. Поради
              тази причина мигрирането на уеб сайтовете към платформата EC2 е доста лесно.<a class="resource-link"
                 href="#resourse-1">[1]</a></li>
          </ul>
        </li>
        <li>
          <h4>Сигурност</h4>
          <ul id="sublist">
            <li>EC2 има множество вградени функции за сигурност. Когато стартирате приложение на EC2, внедряването му е
              в технически
              изолирана виртуална частна облачна мрежа (VPCN). Потребителите имат пълен контрол над оторизацията на
              лицата, които
              искат да имат достъп до техните приложения в облака. <a class="resource-link"
                 href="#resourse-1">[1]</a></li>
            <li>
              Amazon EC2 има групи за сигурност, които действат като виртуални защитни стени, които контролират трафика
              към едно или
              няколко приложения. Потребителите могат да създават правила за всяка група за сигурност и да ги променят
              по всяко време.
              Ако дадена компания реши да поддържа някои процеси, работещи на свое физическо място, и иска да свърже
              своите виртуални
              частни облаци с физическият хардуер установен на своето място, то компанията може да установи безпроблемна
              връзка чрез
              хардуерно VPN устройство. <a class="resource-link"
                 href="#resourse-1">[1]</a></li>
          </ul>
        </li>
      </ul>
      <p>След като разгледахме какво представлява EC2, нека създадем виртуална машина и да хостваме PHP приложение.
        Първо трябва да имате акаунт в AWS. Ако нямате акаунт можете да се регистрирате на следния линк: <a
           href="https://portal.aws.amazon.com/billing/signup#/start/email"
           target="_blank">AWS Registration Form</a>.</p>
    </article>
    <article>

      <h3 class="offset"
          id="steps-to-host-PHP-app">Подробни стъпки за хостване на PHP приложение на AWS EC2 инстанция:</h3>
      <ol class="steps-for-reprod">
        <li class="offset"
            id="login-AWS">Логин в AWS потребителски акаунт</li>
        <p>Отидете в сайта на <a href="https://aws.amazon.com/"
             target="_blank">AWS</a> и щракнете върху бутона <a
             href="https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Fus-east-1.console.aws.amazon.com%2Fconsole%2Fhome%3FhashArgs%3D%2523%26isauthcode%3Dtrue%26nc2%3Dh_ct%26region%3Dus-east-1%26skipRegion%3Dtrue%26src%3Dheader-signin%26state%3DhashArgsFromTB_us-east-1_49aff4ea584275ab&client_id=arn%3Aaws%3Asignin%3A%3A%3Aconsole%2Fcanvas&forceMobileApp=0&code_challenge=ixj8YpM39hHELf5Yv1-zjprjeVcIjzwXEn6Gdg04UGI&code_challenge_method=SHA-256"
             target="_blank">Sign in</a>, намиращ се в навигационната лента отгоре, след което
          изберете Root
          потребител или IAM потребител въз основа на описанието и въведете своя имейл.</p>
        <img src="./img/loginscreen.png"
             width="100%">
        <p>Щракнете върху “Next” и си въведете паролата, след което натиснете “Sign in”.</p>
        <img src="./img/passowrdscrren.png"
             width="100%">

        <li class="offset"
            id="finding-EC2">Намиране на EC2 услугата</li>
        <p>След влизане в акаунта ви ще видите началната страница с различни прозорци, един от които показва
          най-известните услуги, предлагани от AWS. Може да откриете услугата EC2 от там, или да я потърсите горе-вляво
          от бутона "Services", след което да я отворите.</p>
        <img src="./img/servicesscreen.png"
             width="100%">
        <p>Ще ви се отвори екран с конфигуриране на настройките. В първото поле можете да именувате виртуалната си
          машина, както и да добавите AWS тагове.</p>
        <p style="font-size: 10pt"> * С таговете можете да запазвате метаданни към своите AWS ресурси,
          състоящи се от
          дефинирани от потребителя ключ и стойност. Таговете могат да ви помогнат да управлявате, идентифицирате,
          организирате,
          търсите и филтрирате ресурси. Можете да създавате тагове, за да категоризирате ресурси по предназначение,
          собственик,
          среда или други критерии.</p>
        <img src="./img/ec2name.png"
             width="100%">

        <li class="offset"
            id="choosing-OS">Избиране на предпочитана ОС</li>
        <p>Изберете предпочитаната операционна система на виртуалната машина, която ще ви служи за сървър. В този пример
          ще изберем Ubuntu.</p>
        <img src="./img/chooseOS.png"
             width="100%">

        <li class="offset"
            id="configuring-EC2">Конфигуриране на EC2</li>
        <p>В полето "Instance type" можете да изберете различни параметри за своята EC2 виртуална машина. Ние ще се
          спрем на
          Free Tier опция с 1GiB Memory (~1.07GB).</p>
        <p style="font-size: 10pt"> *За първите 12 месеца след датата на регистрация в AWS
          потребителят има право на до 750 часа работно време на микро-инстанции всеки месец. Когато 12-месечният период
          изтече или ако
          потреблението надвишава ограниченията от 750ч/мес, заплащането става пропорционално на ползването на
          съответната услуга.</p>
        <p>В полето за Key Pair можете (и е препоръчително) да си създадете ключ за автентикация към вашата машина.

        </p>
        <img src="./img/chooseosfreetirer.png"
             width="100%">
        <p>При
          натискане на "Create new key pair" ще ви се появи прозорец с настройки на вашия ключ.

        </p>
        <img src="./img/keypairdialog.png"
             width="60%">

        <li class="offset"
            id="network-config">Задаване на мрежови настройки</li>
        <p>За нашите цели е достатъчно да изберем VPC и Security Group по подразбиране. Трябва да настроим правило
          на security групата, в което да разрешим определен интернет трафик към машината. В нашия
          случай сме разрешили всякакъв трафик, постъпващ само от собствения ни IP адрес.
        <p>Също можете и да изберете от вече дефинирани security групи или да добавяте много правила. Тези
          настройки могат по-късно да бъдат
          променени.</p>
        <img src="./img/networkconfig.png"
             width="80%">

        <li class="offset"
            id="adding-storage">Конфигуриране на хранилище</li>
        <p>В тази секция можете да добавите определен размер памет на EC2 инстанцията. По подразбиране
          размерът е 8 GB, но винаги можете да го промените според нуждите си. Ако натиснете бутона "Advanced" можете да
          разширите възможностите за задаване на настройки на хранилището като избор на тип твърд диск (SSD), криптиране
          на
          данните, изтриване при терминация и др.</p>
        <img src="./img/storage.png"
             width="90%">
        <li class="offset"
            id="additional-settings">Допълнителни настройки</li>
        <p> Има секция за допълнителни настройки, които отварят доста възможности за работа с нашата виртуална EC2
          инстанция, но те не са обект на тази статия и не са от съществена важност за нашите цели.
          Все пак Amazon са предоставили допълнителна информация за всяка опция, достъпна чрез бутона "info" отдясно на
          името и.
        </p>
        <img src="./img/advanceddetails.png"
             width="70%">

        <li class="offset"
            id="start-EC2">Стартиране на EC2</li>
        <p>Преди да стартирате инстанцията можете да прегледате информацията за нея в "Summary" секцията. Когато сте
          готови с настройките натиснете "Launch instance" и почакайте известно време.</p>
        <img src="./img/Reviewspage.png"
             width="90%">
        <p>След стартиране на инстанцията ще видите екран със съобщение за успешното и създаване. Можете да натиснете
          "View all instances", за да видите току що създадената виртуална машина.</p>
        <img src="./img/instancelaunched.png"
             width="90%">

        <p>В тази страница можете да настройвате своята EC2 инстанция, да я спирате и пускате, както и да видите всички
          данни и статистически анализи за нейната работа. Натиснете върху instance ID-то на конкретната инстанция, за
          да я отворите.</p>
        <img src="./img/instancedetails.png"
             width="90%">
        <li class="offset"
            id="connect-to-EC2">Свързване към EC2</li>
        <p>Натиснете "Connect", за да видите опциите за свързване.</p>
        <img src="./img/viewinstance.png"
             width="100%">
        <p>Изберете начин на свързване. В нашия случай ще ползваме Secure Shell. Копирайте примерната команда за
          конекция с инстанцията.</p>
        <img src="./img/sshconnect.png"
             width="100%">
        <p>Ако сте на Windows OS можете да отворите Command Prompt, а на Linux - терминала. След това влезте в
          директорията, където ви се е
          запазил '.pem' файла с ключа. В нашия случай той се намира в папката 'Downloads' под името 'phpapphost.pem'.
        </p>
        <p>Поставете по-рано копираната команда в терминала/командния ред и я изпълнете. В нашият случай:
        </p>
        <p> 'ssh -i
          "phpapphost.pem" ubuntu@ec2-18-236-99-175.us-west-2.compute.amazonaws.com' </p>
        <img src="./img/commandprompt.png"
             width="100%">
        <p>Вече работите в терминала на своята виртуална машина и всяка операция се извършва на нейната оперативна и
          твърда памет. Поради тази причина на моменти терминалът може да ви се стори по-малко интерактивен или със
          забавяне.</p>

        <li class="offset"
            id="instal-Apache-and-PHP">Инсталиране на Apache сървър и PHP</li>
        <p>За да може да стартирате PHP приложението трябва да инсталирате Apache сървър, който да обработва http(s)
          заявките. За
          целта следвайте следните команди:</p>
        <ol>
          <li>sudo apt update</li>
          <li>sudo apt install apache2</li>
          <li>sudo apt install php libapache2-mod-php php-mysql</li>
        </ol>
        <p>Сега отворете своят уеб браузър и въведете публичния IP адрес на инстанцията, в случая той е 18.236.99.175.
          Би
          трябвало да видите “Apache2 Ubuntu” страницата по подразбиране. Това означава, че Apache сървърът е инсталиран
          успешно и
          работи. <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <img src="./img/apacherunning.png"
             width="100%">
        <p>Сега, когато потребител отвори уеб приложението ви, Apache сървърът ще връща html файлове, това означава
          файлове от тип
          index.html. Затова ще трябва промяна в конфигурацията на Apache, така че първо да се отваря (ако е наличен)
          index.php
          файл, а след това index.html. Командите са: <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <ol>
          <li>sudo nano /etc/apache2/mods-enabled/dir.conf</li>
        </ol>
        <p>Ще видите нещо подобно на това: <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <img src="./img/configfileInitial.png"
             width="90%">
        <p>Преместете index.php на първо място преди index.html и натиснете CTRL+O и CTRL+X. <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <img src="./img/configfileChanged.png"
             width="90%">
        <p>Сега рестартирайте Apache сървърът и проверете неговия статус със следните команди: <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <ol>
          <li>sudo systemctl restart apache2</li>
          <li>sudo systemctl status apache2</li>
        </ol>

        <li class="offset"
            id="creating-simple-PHP-app">Създаване на просто PHP приложение</li>
        <p>Сега ще напишем PHP програма, която да изписва “Hello World” и ще я хостнем на нашия сървър. Можете да
          направите това със следните команди: </p>
        <ol>
          <li>cd /var/www/html</li>
          <li>sudo nano index.php</li>
        </ol>
        <p>Във файла да напишете следните примерни редове код и го запазете с командите CTRL+O и CTRL+X: <a
             class="resource-link"
             href="#resourse-2">[2]</a></p>
        <img src="./img/phpScript.png"
             width="90%">
        <p>Сега ако отворите уеб браузъра и напишете публичния IP адрес на EC2 сървъра ще ви се отвори вашето PHP
          приложение. <a class="resource-link"
             href="#resourse-2">[2]</a></p>
        <img src="./img/finaloutpt.png"
             width="80%">

        <li class="offset"
            id="instal-MySQL-over-Apache">Инсталиране на MySQL върху Apache сървър</li>
        <p>MySQL е популярна, безплатна база данни с отворен код, която може да се използва за съхранение на бази данни
          в мрежата.
          За да инсталираме MySQL на уеб сървъра на apache в linux, първо искаме да се уверим, че нашият Linux сървър е
          актуален.</p>
        <p>За да направите това, изпълнете следните два реда код по-долу: <a class="resource-link"
             href="#resourse-3">[3]</a></p>
        <ol>
          <li>sudo apt-get update</li>
          <li>sudo apt-get upgrade</li>
        </ol>
        <p>Тези команди извършват нужните ъпдейти и актуализации на вашата линукс система.
          Сега сте готови да инсталирате MySQL на вашия Apache сървър. Можете да го направите с командата:</p>
        <ol>
          <li>sudo apt-get install mysql-server</li>
        </ol>
        <p>Когато извършвате тази инсталация, shell ще ви подкани за парола за MySQL-сървъра. Трябва да въведете парола
          и след това да я повторите за потвърждение. След като това бъде успешно инсталирано, можете да тествате дали
          MySQL работи направо от терминала чрез
          следната
          команда: <a class="resource-link"
             href="#resourse-3">[3]</a></p>
        <ol>
          <li>mysql -u username -p</li>
        </ol>
        <p>Заменете username с потребителя, с когото сте създали MySQL-сървъра.
          След това ще бъдете подканени да въведете парола. След като направите това, вече имате пълен достъп до MySQL.
          Можете да правите всички неща с MySQL както обикновено.
          В кода по-долу е показано как се създава база данни, наречена users, а след това с командата “show databases”
          се показват всички налични бази данни. <a class="resource-link"
             href="#resourse-3">[3]</a></p>
        <img src="./img/Running-mysql-on-apache-server-in-linux-shell.png"
             width="80%">
        <p>Накрая, излизате от софтуера MySQL с командата quit.
          След това ще бъдете върнати към командния терминал на Linux.</p>
    </article>

    <br /><br />
    <footer>Източници:
      <ul class="offset"
          id="resources">
        <li id="resourse-1">[1] Ahmed Khan, "<a href="https://www.cloudways.com/blog/host-php-on-aws-cloud/"
             target="_blank">How to Host PHP on Amazon AWS EC2</a>"<i><label> - последна промяна на
              20.09.2020г, последно посетен на 11.04.2022г</label></i></li>
        <li id="resourse-2">[2] Anish Ansari, "<a href="https://www.c-sharpcorner.com/article/how-to-create-aws/"
             target="_blank">How To Create AWS EC2 Instance And Host PHP Applications</a>"<i><label> - последна промяна
              на 08.09.2020г, последно посетен на 11.04.2022г</label></i></li>
        <li id="resourse-3">[3] David, "<a
             href="http://www.learningaboutelectronics.com/Articles/How-to-install-mysql-server-on-an-apache-server-in-linux.php"
             target="_blank">How to Install MySQL-server on an Apache Web Server in Linux</a>"<i><label> - последна
              промяна 2018г, последно посетен на 11.04.2022г</label></i></li>
      </ul>
    </footer>
  </section>
</body>

</html>